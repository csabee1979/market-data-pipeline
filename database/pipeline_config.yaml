# ============================================================================
# Research Papers Data Pipeline Configuration
# ============================================================================
# Purpose: Complete configuration for the consolidated data pipeline
# Usage: Modify these values to customize pipeline behavior
# ============================================================================

# ============================================================================
# API Configuration - AI Papers Fetching Settings
# ============================================================================

api:
  # Number of days to look back for recent papers
  days_back: 3
  
  # Minimum AI relevance score threshold (0.0 to 1.0)
  # Papers with score >= this value OR with AI field/subfield will be included
  min_ai_score: 0.7
  
  # Output directory for temporary JSON files
  output_dir: "temp"

# ============================================================================
# Database Configuration
# ============================================================================

database:
  # Path to SQL schema file
  schema_file: "database/schema.sql"
  
  # Whether to deploy/update schema before loading data
  deploy_schema: true
  
  # Connection settings (will be overridden by environment variables)
  host: "localhost"
  port: 5432
  database: "research_papers"
  # Username and password should be set via environment variables:
  # DB_USER and DB_PASSWORD

# ============================================================================
# Data Quality Testing Configuration
# ============================================================================

testing:
  # Whether to run quality tests after data loading
  run_tests: true
  
  # Path to test configuration file
  config_file: "database/test_config.yaml"

# ============================================================================
# Logging Configuration
# ============================================================================

logging:
  # Log level: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  
  # Directory for log files
  log_dir: "logs"

# ============================================================================
# Data Quality Thresholds (inherited from test_config.yaml)
# ============================================================================

# Suspicious citation count threshold
suspicious_citation_threshold: 100000

# Time window for recently updated retracted papers (in days)
retracted_update_window_days: 30

# Maximum allowed duplicate DOIs
max_duplicate_dois: 0

# ============================================================================
# Test Execution Settings
# ============================================================================

# Maximum number of sample records to show for each failing test
max_sample_records: 10

# Whether to show detailed sample records for passing tests
show_samples_for_passing_tests: false

# Whether to continue testing after first failure or stop
continue_on_failure: true

# ============================================================================
# Test Categories and Weights
# ============================================================================

test_categories:
  data_completeness:
    weight: 1.0
    critical: true
    description: "Tests for missing required fields"
  
  data_validity:
    weight: 1.0
    critical: true
    description: "Tests for invalid data ranges and formats"
  
  business_logic:
    weight: 0.8
    critical: true
    description: "Tests for business rule violations"
  
  data_quality:
    weight: 0.6
    critical: false
    description: "Tests for duplicates and anomalies"
  
  referential_integrity:
    weight: 1.0
    critical: true
    description: "Tests for foreign key consistency"
  
  timestamps_metadata:
    weight: 0.4
    critical: false
    description: "Tests for date/time validity"

# ============================================================================
# Output Settings
# ============================================================================

output:
  # Format for test results: 'detailed', 'summary', 'json'
  format: "detailed"
  
  # Whether to include SQL queries in output
  include_queries: false
  
  # Whether to save results to file
  save_to_file: true
  
  # Output file path (relative to script location)
  output_file: "pipeline_results.txt"
  
  # Whether to include timestamps in output
  include_timestamps: true

# ============================================================================
# Advanced Settings
# ============================================================================

advanced:
  # Query timeout in seconds
  query_timeout: 300
  
  # Whether to use parallel execution for tests
  parallel_execution: false
  
  # Number of parallel workers (if parallel_execution is true)
  max_workers: 4
  
  # Whether to validate SQL syntax before execution
  validate_sql: true
